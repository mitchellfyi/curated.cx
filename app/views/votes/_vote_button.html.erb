<%# Vote button partial for content items %>
<%# locals: (content_item:, voted: false) %>
<%= turbo_frame_tag "vote-button-#{content_item.id}" do %>
  <% if user_signed_in? %>
    <%= button_to vote_content_item_path(content_item),
                  method: :post,
                  class: "flex items-center gap-1 px-2 py-1 rounded transition-colors #{voted ? 'text-blue-600 bg-blue-50' : 'text-gray-500 hover:text-blue-600 hover:bg-gray-50'}",
                  data: { turbo_stream: true } do %>
      <svg class="w-4 h-4" fill="<%= voted ? 'currentColor' : 'none' %>" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
      </svg>
      <span class="text-sm font-medium"><%= content_item.upvotes_count %></span>
    <% end %>
  <% else %>
    <%= link_to new_user_session_path,
                class: "flex items-center gap-1 px-2 py-1 rounded text-gray-500 hover:text-blue-600 hover:bg-gray-50 transition-colors",
                title: t('votes.sign_in_to_vote') do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
      </svg>
      <span class="text-sm font-medium"><%= content_item.upvotes_count %></span>
    <% end %>
  <% end %>
<% end %>
