<%# Site card for network directory %>
<article class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow">
  <div class="p-6">
    <div class="flex items-start justify-between mb-3">
      <div class="flex-1 min-w-0">
        <h3 class="text-lg font-semibold text-gray-900 mb-1">
          <%= site.name %>
        </h3>
        <% if site.primary_hostname.present? %>
          <p class="text-sm text-gray-500 truncate">
            <%= site.primary_hostname %>
          </p>
        <% end %>
      </div>
      <% if site.topics.any? %>
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
          <%= site.topics.first %>
        </span>
      <% end %>
    </div>

    <% if site.description.present? %>
      <p class="text-gray-600 text-sm line-clamp-3 mb-4">
        <%= truncate(site.description, length: 150) %>
      </p>
    <% end %>

    <div class="flex items-center justify-between">
      <% if site.topics.size > 1 %>
        <div class="flex flex-wrap gap-1">
          <% site.topics.drop(1).first(2).each do |topic| %>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-xs text-gray-600 bg-gray-100">
              <%= topic %>
            </span>
          <% end %>
          <% if site.topics.size > 3 %>
            <span class="text-xs text-gray-500">+<%= site.topics.size - 3 %></span>
          <% end %>
        </div>
      <% else %>
        <span></span>
      <% end %>

      <% site_url = site.primary_hostname.present? ? "https://#{site.primary_hostname}" : "#" %>
      <%= link_to site_url,
                  class: "inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded text-blue-700 hover:bg-blue-50 transition-colors",
                  target: "_blank",
                  rel: "noopener" do %>
        <%= t('network.sites.visit') %>
        <svg class="ml-1 w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
        </svg>
      <% end %>
    </div>
  </div>
</article>
