<div class="bg-white shadow-md rounded-lg overflow-hidden">
  <div class="relative">
    <% if stream.status_live? %>
      <div class="aspect-video bg-gray-900 flex items-center justify-center">
        <div class="text-center">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-red-600 text-white animate-pulse">
            <%= t("live_streams.live_badge") %>
          </span>
        </div>
      </div>
    <% elsif stream.replay_available? %>
      <div class="aspect-video bg-gray-100 flex items-center justify-center">
        <svg class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
    <% else %>
      <div class="aspect-video bg-gray-50 flex items-center justify-center">
        <svg class="h-12 w-12 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </div>
    <% end %>

    <% unless stream.visibility_public_access? %>
      <div class="absolute top-2 right-2">
        <%= badge(t("discussions.subscribers_only"), :purple) %>
      </div>
    <% end %>
  </div>

  <div class="p-4">
    <h3 class="font-semibold text-gray-900 truncate">
      <%= link_to stream.title, live_stream_path(stream), class: "hover:text-blue-600" %>
    </h3>

    <% if stream.description.present? %>
      <p class="text-sm text-gray-500 mt-1 line-clamp-2"><%= truncate(stream.description, length: 100) %></p>
    <% end %>

    <div class="mt-3 flex items-center justify-between">
      <div class="text-sm text-gray-500">
        <% if stream.status_scheduled? %>
          <%= t("live_streams.scheduled_for", time: l(stream.scheduled_at, format: :short)) %>
        <% elsif stream.status_live? %>
          <span class="text-red-600 font-medium">
            <%= t("live_streams.show.viewer_count", count: stream.viewer_count) %>
          </span>
        <% elsif stream.status_ended? || stream.status_archived? %>
          <%= t("live_streams.status.#{stream.status}") %>
        <% end %>
      </div>

      <% if stream.status_live? %>
        <%= link_to t("live_streams.watch_now"), live_stream_path(stream), class: "text-sm font-medium text-red-600 hover:text-red-800" %>
      <% elsif stream.replay_available? %>
        <%= link_to t("live_streams.watch_replay"), live_stream_path(stream), class: "text-sm font-medium text-blue-600 hover:text-blue-800" %>
      <% end %>
    </div>
  </div>
</div>
